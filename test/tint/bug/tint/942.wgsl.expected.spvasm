; SPIR-V
; Version: 1.3
; Generator: Google Tint Compiler; 1
; Bound: 291
; Schema: 0
               OpCapability Shader
               OpCapability ImageQuery
         %66 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint GLCompute %main "main" %main_workgroup_id_Input %main_local_invocation_id_Input %main_local_invocation_index_Input
               OpExecutionMode %main LocalSize 64 1 1
               OpName %samp "samp"
               OpMemberName %params_block_tint_explicit_layout 0 "inner"
               OpName %params_block_tint_explicit_layout "params_block_tint_explicit_layout"
               OpName %inputTex "inputTex"
               OpName %outputTex "outputTex"
               OpMemberName %flip_block_tint_explicit_layout 0 "inner"
               OpName %flip_block_tint_explicit_layout "flip_block_tint_explicit_layout"
               OpName %tile "tile"
               OpName %main_workgroup_id_Input "main_workgroup_id_Input"
               OpName %main_local_invocation_id_Input "main_local_invocation_id_Input"
               OpName %main_local_invocation_index_Input "main_local_invocation_index_Input"
               OpName %main_inner "main_inner"
               OpName %WorkGroupID "WorkGroupID"
               OpName %LocalInvocationID "LocalInvocationID"
               OpName %tint_local_index "tint_local_index"
               OpName %filterOffset "filterOffset"
               OpName %dims "dims"
               OpName %baseIndex "baseIndex"
               OpName %r "r"
               OpName %r_0 "r"
               OpName %c "c"
               OpName %loadIndex "loadIndex"
               OpName %c_0 "c"
               OpName %writeIndex "writeIndex"
               OpName %center "center"
               OpName %acc "acc"
               OpName %tint_loop_idx "tint_loop_idx"
               OpName %f "f"
               OpName %i "i"
               OpName %tint_low_inc "tint_low_inc"
               OpName %tint_carry "tint_carry"
               OpName %tint_div_u32 "tint_div_u32"
               OpName %lhs "lhs"
               OpName %rhs "rhs"
               OpName %main "main"
               OpDecorate %samp DescriptorSet 0
               OpDecorate %samp Binding 0
               OpDecorate %_arr_v4uint_uint_1 ArrayStride 16
               OpMemberDecorate %params_block_tint_explicit_layout 0 Offset 0
               OpDecorate %params_block_tint_explicit_layout Block
               OpDecorate %4 DescriptorSet 0
               OpDecorate %4 Binding 1
               OpDecorate %4 NonWritable
               OpDecorate %inputTex DescriptorSet 1
               OpDecorate %inputTex Binding 1
               OpDecorate %outputTex DescriptorSet 1
               OpDecorate %outputTex Binding 2
               OpDecorate %outputTex NonReadable
               OpMemberDecorate %flip_block_tint_explicit_layout 0 Offset 0
               OpDecorate %flip_block_tint_explicit_layout Block
               OpDecorate %18 DescriptorSet 1
               OpDecorate %18 Binding 3
               OpDecorate %18 NonWritable
               OpDecorate %main_workgroup_id_Input BuiltIn WorkgroupId
               OpDecorate %main_local_invocation_id_Input BuiltIn LocalInvocationId
               OpDecorate %main_local_invocation_index_Input BuiltIn LocalInvocationIndex
          %3 = OpTypeSampler
%_ptr_UniformConstant_3 = OpTypePointer UniformConstant %3
       %samp = OpVariable %_ptr_UniformConstant_3 UniformConstant
       %uint = OpTypeInt 32 0
     %v4uint = OpTypeVector %uint 4
     %uint_1 = OpConstant %uint 1
%_arr_v4uint_uint_1 = OpTypeArray %v4uint %uint_1
%params_block_tint_explicit_layout = OpTypeStruct %_arr_v4uint_uint_1
%_ptr_Uniform_params_block_tint_explicit_layout = OpTypePointer Uniform %params_block_tint_explicit_layout
          %4 = OpVariable %_ptr_Uniform_params_block_tint_explicit_layout Uniform
      %float = OpTypeFloat 32
         %13 = OpTypeImage %float 2D 0 0 0 1 Unknown
%_ptr_UniformConstant_13 = OpTypePointer UniformConstant %13
   %inputTex = OpVariable %_ptr_UniformConstant_13 UniformConstant
         %17 = OpTypeImage %float 2D 0 0 0 2 Rgba8
%_ptr_UniformConstant_17 = OpTypePointer UniformConstant %17
  %outputTex = OpVariable %_ptr_UniformConstant_17 UniformConstant
%flip_block_tint_explicit_layout = OpTypeStruct %_arr_v4uint_uint_1
%_ptr_Uniform_flip_block_tint_explicit_layout = OpTypePointer Uniform %flip_block_tint_explicit_layout
         %18 = OpVariable %_ptr_Uniform_flip_block_tint_explicit_layout Uniform
    %v3float = OpTypeVector %float 3
   %uint_256 = OpConstant %uint 256
%_arr_v3float_uint_256 = OpTypeArray %v3float %uint_256
     %uint_4 = OpConstant %uint 4
%_arr__arr_v3float_uint_256_uint_4 = OpTypeArray %_arr_v3float_uint_256 %uint_4
%_ptr_Workgroup__arr__arr_v3float_uint_256_uint_4 = OpTypePointer Workgroup %_arr__arr_v3float_uint_256_uint_4
       %tile = OpVariable %_ptr_Workgroup__arr__arr_v3float_uint_256_uint_4 Workgroup
     %v3uint = OpTypeVector %uint 3
%_ptr_Input_v3uint = OpTypePointer Input %v3uint
%main_workgroup_id_Input = OpVariable %_ptr_Input_v3uint Input
%main_local_invocation_id_Input = OpVariable %_ptr_Input_v3uint Input
%_ptr_Input_uint = OpTypePointer Input %uint
%main_local_invocation_index_Input = OpVariable %_ptr_Input_uint Input
       %void = OpTypeVoid
         %39 = OpTypeFunction %void %v3uint %v3uint %uint
     %uint_2 = OpConstant %uint 2
   %uint_264 = OpConstant %uint 264
%_ptr_Uniform_v4uint = OpTypePointer Uniform %v4uint
     %uint_0 = OpConstant %uint 0
        %int = OpTypeInt 32 1
      %int_0 = OpConstant %int 0
     %v2uint = OpTypeVector %uint 2
         %77 = OpConstantComposite %v2uint %uint_4 %uint_1
  %uint_1024 = OpConstant %uint 1024
       %bool = OpTypeBool
%_ptr_Workgroup_v3float = OpTypePointer Workgroup %v3float
        %101 = OpConstantNull %v3float
    %uint_64 = OpConstant %uint 64
%_ptr_Function_uint = OpTypePointer Function %uint
%_ptr_Function_v2uint = OpTypePointer Function %v2uint
     %uint_3 = OpConstant %uint 3
   %uint_255 = OpConstant %uint 255
    %v2float = OpTypeVector %float 2
 %float_0_25 = OpConstant %float 0.25
        %161 = OpConstantComposite %v2float %float_0_25 %float_0_25
        %166 = OpTypeSampledImage %13
    %v4float = OpTypeVector %float 4
    %float_0 = OpConstant %float 0
      %false = OpConstantFalse %bool
     %v2bool = OpTypeVector %bool 2
%_ptr_Function_v3float = OpTypePointer Function %v3float
    %float_1 = OpConstant %float 1
%uint_4294967295 = OpConstant %uint 4294967295
        %231 = OpConstantComposite %v2uint %uint_4294967295 %uint_4294967295
        %236 = OpConstantNull %v2uint
        %279 = OpTypeFunction %uint %uint %uint
        %285 = OpTypeFunction %void
 %main_inner = OpFunction %void None %39
%WorkGroupID = OpFunctionParameter %v3uint
%LocalInvocationID = OpFunctionParameter %v3uint
%tint_local_index = OpFunctionParameter %uint
         %40 = OpLabel
          %r = OpVariable %_ptr_Function_uint Function
        %r_0 = OpVariable %_ptr_Function_uint Function
          %c = OpVariable %_ptr_Function_uint Function
  %loadIndex = OpVariable %_ptr_Function_v2uint Function
        %c_0 = OpVariable %_ptr_Function_uint Function
 %writeIndex = OpVariable %_ptr_Function_v2uint Function
        %acc = OpVariable %_ptr_Function_v3float Function
%tint_loop_idx = OpVariable %_ptr_Function_v2uint Function
          %f = OpVariable %_ptr_Function_uint Function
          %i = OpVariable %_ptr_Function_uint Function
               OpBranch %41
         %41 = OpLabel
               OpBranch %44
         %44 = OpLabel
         %46 = OpPhi %uint %tint_local_index %41 %47 %43
               OpLoopMerge %45 %43 None
               OpBranch %42
         %42 = OpLabel
         %92 = OpUGreaterThanEqual %bool %46 %uint_1024
               OpSelectionMerge %95 None
               OpBranchConditional %92 %96 %95
         %96 = OpLabel
               OpBranch %45
         %95 = OpLabel
         %97 = OpUMod %uint %46 %uint_256
         %98 = OpUDiv %uint %46 %uint_256
         %99 = OpAccessChain %_ptr_Workgroup_v3float %tile %98 %97
               OpStore %99 %101 None
               OpBranch %43
         %43 = OpLabel
         %47 = OpIAdd %uint %46 %uint_64
               OpBranch %44
         %45 = OpLabel
               OpControlBarrier %uint_2 %uint_2 %uint_264
         %51 = OpAccessChain %_ptr_Uniform_v4uint %4 %uint_0 %uint_0
         %54 = OpLoad %v4uint %51 None
         %55 = OpCompositeExtract %uint %54 0
         %56 = OpISub %uint %55 %uint_1
%filterOffset = OpFunctionCall %uint %tint_div_u32 %56 %uint_2
         %59 = OpLoad %13 %inputTex None
         %60 = OpImageQueryLevels %uint %59
         %61 = OpISub %uint %60 %uint_1
         %62 = OpBitcast %uint %int_0
         %65 = OpExtInst %uint %66 UMin %62 %61
       %dims = OpImageQuerySizeLod %v2uint %59 %65
         %69 = OpVectorShuffle %v2uint %WorkGroupID %WorkGroupID 0 1
         %70 = OpAccessChain %_ptr_Uniform_v4uint %4 %uint_0 %uint_0
         %71 = OpLoad %v4uint %70 None
         %72 = OpCompositeExtract %uint %71 1
         %73 = OpCompositeConstruct %v2uint %72 %uint_4
         %74 = OpIMul %v2uint %69 %73
         %75 = OpVectorShuffle %v2uint %LocalInvocationID %LocalInvocationID 0 1
         %76 = OpIMul %v2uint %75 %77
         %78 = OpIAdd %v2uint %74 %76
         %79 = OpCompositeConstruct %v2uint %filterOffset %uint_0
  %baseIndex = OpISub %v2uint %78 %79
               OpBranch %81
         %81 = OpLabel
               OpStore %r %uint_0
               OpBranch %84
         %84 = OpLabel
               OpLoopMerge %85 %83 None
               OpBranch %82
         %82 = OpLabel
        %105 = OpLoad %uint %r None
        %106 = OpULessThan %bool %105 %uint_4
               OpSelectionMerge %107 None
               OpBranchConditional %106 %107 %108
        %108 = OpLabel
               OpBranch %85
        %107 = OpLabel
               OpBranch %109
        %109 = OpLabel
               OpStore %c %uint_0
               OpBranch %112
        %112 = OpLabel
               OpLoopMerge %113 %111 None
               OpBranch %110
        %110 = OpLabel
        %129 = OpLoad %uint %c None
        %130 = OpULessThan %bool %129 %uint_4
               OpSelectionMerge %131 None
               OpBranchConditional %130 %131 %132
        %132 = OpLabel
               OpBranch %113
        %131 = OpLabel
        %133 = OpLoad %uint %c None
        %134 = OpLoad %uint %r None
        %135 = OpCompositeConstruct %v2uint %133 %134
        %136 = OpIAdd %v2uint %baseIndex %135
               OpStore %loadIndex %136
        %139 = OpAccessChain %_ptr_Uniform_v4uint %18 %uint_0 %uint_0
        %140 = OpLoad %v4uint %139 None
        %141 = OpCompositeExtract %uint %140 0
        %142 = OpINotEqual %bool %141 %uint_0
               OpSelectionMerge %143 None
               OpBranchConditional %142 %144 %143
        %144 = OpLabel
        %209 = OpLoad %v2uint %loadIndex None
        %210 = OpVectorShuffle %v2uint %209 %209 1 0
               OpStore %loadIndex %210 None
               OpBranch %143
        %143 = OpLabel
        %145 = OpLoad %uint %r None
        %146 = OpCompositeExtract %uint %LocalInvocationID 0
        %147 = OpIMul %uint %uint_4 %146
        %148 = OpLoad %uint %c None
        %149 = OpIAdd %uint %147 %148
        %150 = OpExtInst %uint %66 UMin %145 %uint_3
        %152 = OpExtInst %uint %66 UMin %149 %uint_255
        %154 = OpAccessChain %_ptr_Workgroup_v3float %tile %150 %152
        %155 = OpLoad %13 %inputTex None
        %156 = OpLoad %3 %samp None
        %157 = OpLoad %v2uint %loadIndex None
        %159 = OpConvertUToF %v2float %157
        %160 = OpFAdd %v2float %159 %161
        %163 = OpConvertUToF %v2float %dims
        %164 = OpFDiv %v2float %160 %163
        %165 = OpSampledImage %166 %155 %156
        %167 = OpImageSampleExplicitLod %v4float %165 %164 Lod %float_0
        %170 = OpVectorShuffle %v3float %167 %167 0 1 2
               OpStore %154 %170 None
               OpBranch %111
        %111 = OpLabel
        %171 = OpLoad %uint %c None
        %172 = OpIAdd %uint %171 %uint_1
               OpStore %c %172 None
               OpBranch %112
        %113 = OpLabel
               OpBranch %83
         %83 = OpLabel
        %114 = OpLoad %uint %r None
        %115 = OpIAdd %uint %114 %uint_1
               OpStore %r %115 None
               OpBranch %84
         %85 = OpLabel
               OpControlBarrier %uint_2 %uint_2 %uint_264
               OpBranch %87
         %87 = OpLabel
               OpStore %r_0 %uint_0
               OpBranch %90
         %90 = OpLabel
               OpLoopMerge %91 %89 None
               OpBranch %88
         %88 = OpLabel
        %117 = OpLoad %uint %r_0 None
        %118 = OpULessThan %bool %117 %uint_4
               OpSelectionMerge %119 None
               OpBranchConditional %118 %119 %120
        %120 = OpLabel
               OpBranch %91
        %119 = OpLabel
               OpBranch %121
        %121 = OpLabel
               OpStore %c_0 %uint_0
               OpBranch %124
        %124 = OpLabel
               OpLoopMerge %125 %123 None
               OpBranch %122
        %122 = OpLabel
        %174 = OpLoad %uint %c_0 None
        %175 = OpULessThan %bool %174 %uint_4
               OpSelectionMerge %176 None
               OpBranchConditional %175 %176 %177
        %177 = OpLabel
               OpBranch %125
        %176 = OpLabel
        %178 = OpLoad %uint %c_0 None
        %179 = OpLoad %uint %r_0 None
        %180 = OpCompositeConstruct %v2uint %178 %179
        %181 = OpIAdd %v2uint %baseIndex %180
               OpStore %writeIndex %181
        %183 = OpAccessChain %_ptr_Uniform_v4uint %18 %uint_0 %uint_0
        %184 = OpLoad %v4uint %183 None
        %185 = OpCompositeExtract %uint %184 0
        %186 = OpINotEqual %bool %185 %uint_0
               OpSelectionMerge %187 None
               OpBranchConditional %186 %188 %187
        %188 = OpLabel
        %211 = OpLoad %v2uint %writeIndex None
        %212 = OpVectorShuffle %v2uint %211 %211 1 0
               OpStore %writeIndex %212 None
               OpBranch %187
        %187 = OpLabel
        %189 = OpCompositeExtract %uint %LocalInvocationID 0
        %190 = OpIMul %uint %uint_4 %189
        %191 = OpLoad %uint %c_0 None
     %center = OpIAdd %uint %190 %191
        %193 = OpUGreaterThanEqual %bool %center %filterOffset
               OpSelectionMerge %194 None
               OpBranchConditional %193 %195 %196
        %195 = OpLabel
        %213 = OpISub %uint %uint_256 %filterOffset
        %198 = OpULessThan %bool %center %213
               OpBranch %194
        %196 = OpLabel
               OpBranch %194
        %194 = OpLabel
        %197 = OpPhi %bool %198 %195 %false %196
               OpSelectionMerge %200 None
               OpBranchConditional %197 %201 %202
        %201 = OpLabel
        %214 = OpLoad %v2uint %writeIndex None
        %215 = OpULessThan %v2bool %214 %dims
        %204 = OpAll %bool %215
               OpBranch %200
        %202 = OpLabel
               OpBranch %200
        %200 = OpLabel
        %203 = OpPhi %bool %204 %201 %false %202
               OpSelectionMerge %205 None
               OpBranchConditional %203 %206 %205
        %206 = OpLabel
               OpStore %acc %101
               OpBranch %219
        %219 = OpLabel
               OpStore %tint_loop_idx %231
               OpStore %f %uint_0
               OpBranch %222
        %222 = OpLabel
               OpLoopMerge %223 %221 None
               OpBranch %220
        %220 = OpLabel
        %234 = OpLoad %v2uint %tint_loop_idx None
        %235 = OpIEqual %v2bool %234 %236
        %237 = OpAll %bool %235
               OpSelectionMerge %238 None
               OpBranchConditional %237 %239 %238
        %239 = OpLabel
               OpBranch %223
        %238 = OpLabel
        %240 = OpLoad %uint %f None
        %241 = OpAccessChain %_ptr_Uniform_v4uint %4 %uint_0 %uint_0
        %242 = OpLoad %v4uint %241 None
        %243 = OpCompositeExtract %uint %242 0
        %244 = OpULessThan %bool %240 %243
               OpSelectionMerge %245 None
               OpBranchConditional %244 %245 %246
        %246 = OpLabel
               OpBranch %223
        %245 = OpLabel
        %247 = OpLoad %uint %f None
        %248 = OpIAdd %uint %center %247
        %249 = OpISub %uint %248 %filterOffset
               OpStore %i %249
        %251 = OpLoad %v3float %acc None
        %252 = OpAccessChain %_ptr_Uniform_v4uint %4 %uint_0 %uint_0
        %253 = OpLoad %v4uint %252 None
        %254 = OpCompositeExtract %uint %253 0
        %255 = OpConvertUToF %float %254
        %256 = OpFDiv %float %float_1 %255
        %257 = OpLoad %uint %r_0 None
        %258 = OpLoad %uint %i None
        %259 = OpExtInst %uint %66 UMin %257 %uint_3
        %260 = OpExtInst %uint %66 UMin %258 %uint_255
        %261 = OpAccessChain %_ptr_Workgroup_v3float %tile %259 %260
        %262 = OpLoad %v3float %261 None
        %263 = OpVectorTimesScalar %v3float %262 %256
        %264 = OpFAdd %v3float %251 %263
               OpStore %acc %264 None
               OpBranch %221
        %221 = OpLabel
        %265 = OpAccessChain %_ptr_Function_uint %tint_loop_idx %uint_0
        %266 = OpLoad %uint %265 None
%tint_low_inc = OpISub %uint %266 %uint_1
        %268 = OpAccessChain %_ptr_Function_uint %tint_loop_idx %uint_0
               OpStore %268 %tint_low_inc None
        %269 = OpIEqual %bool %tint_low_inc %uint_4294967295
 %tint_carry = OpSelect %uint %269 %uint_1 %uint_0
        %271 = OpAccessChain %_ptr_Function_uint %tint_loop_idx %uint_1
        %272 = OpLoad %uint %271 None
        %273 = OpISub %uint %272 %tint_carry
        %274 = OpAccessChain %_ptr_Function_uint %tint_loop_idx %uint_1
               OpStore %274 %273 None
        %275 = OpLoad %uint %f None
        %276 = OpIAdd %uint %275 %uint_1
               OpStore %f %276 None
               OpBranch %222
        %223 = OpLabel
        %224 = OpLoad %17 %outputTex None
        %225 = OpLoad %v2uint %writeIndex None
        %226 = OpLoad %v3float %acc None
        %227 = OpCompositeConstruct %v4float %226 %float_1
               OpImageWrite %224 %225 %227 None
               OpBranch %205
        %205 = OpLabel
               OpBranch %123
        %123 = OpLabel
        %207 = OpLoad %uint %c_0 None
        %208 = OpIAdd %uint %207 %uint_1
               OpStore %c_0 %208 None
               OpBranch %124
        %125 = OpLabel
               OpBranch %89
         %89 = OpLabel
        %126 = OpLoad %uint %r_0 None
        %127 = OpIAdd %uint %126 %uint_1
               OpStore %r_0 %127 None
               OpBranch %90
         %91 = OpLabel
               OpReturn
               OpFunctionEnd
%tint_div_u32 = OpFunction %uint None %279
        %lhs = OpFunctionParameter %uint
        %rhs = OpFunctionParameter %uint
        %280 = OpLabel
        %281 = OpIEqual %bool %rhs %uint_0
        %282 = OpSelect %uint %281 %uint_1 %rhs
        %283 = OpUDiv %uint %lhs %282
               OpReturnValue %283
               OpFunctionEnd
       %main = OpFunction %void None %285
        %286 = OpLabel
        %287 = OpLoad %v3uint %main_workgroup_id_Input None
        %288 = OpLoad %v3uint %main_local_invocation_id_Input None
        %289 = OpLoad %uint %main_local_invocation_index_Input None
        %290 = OpFunctionCall %void %main_inner %287 %288 %289
               OpReturn
               OpFunctionEnd
